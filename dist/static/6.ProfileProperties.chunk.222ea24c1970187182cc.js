webpackJsonp([6],{134:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SUBMIT_STATUS={empty:"Empty",submit:"Submitting",done:"Done"}},373:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),u=n(5),f=r(u),p=n(1194),d=r(p),h=function(e){function t(e){l(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.state={checked:!1},n.handleChange=n.handleChange.bind(n),n}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.setState({checked:this.props.checked})}},{key:"componentWillReceiveProps",value:function(e){this.setState({checked:e.checked})}},{key:"handleChange",value:function(e){this.setState({checked:e.target.checked}),this.props.onChange(e.target.checked)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.style,r=this.state.checked;return s["default"].createElement("label",{style:n},s["default"].createElement("span",{styleName:r?"checkbox-outer-active":"checkbox-outer"},s["default"].createElement("span",{styleName:"checkbox-inner"}),s["default"].createElement("input",{type:"checkbox",checked:r,onChange:this.handleChange,styleName:"checkbox-input"})),s["default"].createElement("span",{className:"fc-blue",styleName:"checkbox-label"},t))}}]),t}(c.Component);h.propTypes={checked:s["default"].PropTypes.bool,onChange:s["default"].PropTypes.func,children:s["default"].PropTypes.oneOfType([s["default"].PropTypes.element,s["default"].PropTypes.string]),style:s["default"].PropTypes.object},h.defaultProps={checked:!1,onChange:function(e){return e},style:{}},t["default"]=(0,f["default"])(h,d["default"])},808:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),f=n(5),p=r(f),d=n(158),h=r(d),y=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={selectedItemsMap:new Map},n.handleClear=n.handleClear.bind(n),n.handleSelect=n.handleSelect.bind(n),n.handleSelectAll=n.handleSelectAll.bind(n),n}return i(t,e),c(t,[{key:"componentWillMount",value:function(){this.setState({selectedItemsMap:new Map(this.props.selectedValues.map(function(e){return[e.key,e]}))})}},{key:"componentWillReceiveProps",value:function(e){this.setState({selectedItemsMap:new Map(e.selectedValues.map(function(e){return[e.key,e]}))})}},{key:"handleClear",value:function(){var e=this.state.selectedItemsMap;e.clear(),this.setState({selectedItemsMap:e}),this.props.onSelect([])}},{key:"handleSelectAll",value:function(){var e=this.state.selectedItemsMap,t=this.props,n=t.values,r=t.allowSelectAll;r&&e.size!==n.length?(e.clear(),n.forEach(function(t){e.set(t.key,t)})):e.clear(),this.setState({selectedItemsMap:e}),this.props.onSelect([].concat(l(e.values())))}},{key:"handleSelect",value:function(e){var t=this.state.selectedItemsMap;this.props.multiple?t.has(e.key)?t["delete"](e.key):t.set(e.key,e):(t.clear(),t.set(e.key,e)),this.setState({selectedItemsMap:t}),this.props.onSelect([].concat(l(t.values())))}},{key:"render",value:function(){return u["default"].createElement("div",null,"AbstractSelector")}}]),t}(s.Component);y.propTypes={label:u["default"].PropTypes.string,icon:u["default"].PropTypes.string,labelSize:u["default"].PropTypes.string,multiple:u["default"].PropTypes.bool,allowSelectAll:u["default"].PropTypes.bool,disableLabel:u["default"].PropTypes.bool,selectedValues:u["default"].PropTypes.arrayOf(u["default"].PropTypes.shape({key:u["default"].PropTypes.string.isRequired,name:u["default"].PropTypes.string.isRequired})),values:u["default"].PropTypes.arrayOf(u["default"].PropTypes.shape({key:u["default"].PropTypes.string.isRequired,name:u["default"].PropTypes.string.isRequired})),onSelect:u["default"].PropTypes.func},y.defaultProps={label:"",labelSize:"normal",multiple:!0,allowSelectAll:!1,disableLabel:!1,selectedValues:[],values:[],onSelect:function(e){return e}},t["default"]=(0,p["default"])(y,h["default"])},809:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),u=n(808),f=r(u),p=n(373),d=r(p),h=n(25),y=r(h),b=n(5),m=r(b),_=n(158),g=r(_),v=n(24),S=function(e){function t(){return l(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.label,r=t.icon,l=t.disableLabel,a=t.multiple,o=t.allowSelectAll,i=t.values,c=t.labelSize,u=this.state.selectedItemsMap;return s["default"].createElement(y["default"],{disableLabel:l,label:n,icon:r,labelSize:c},s["default"].createElement("div",{className:"fix-left-column-wrapper",style:{paddingLeft:a?"80px":0}},s["default"].createElement("div",{className:"fix-left-column",style:{width:"80px"}},!a&&o?null:s["default"].createElement(d["default"],{style:{height:"29px",lineHeight:"29px"},onChange:this.handleSelectAll,checked:u.size===i.length},"全部选择")),s["default"].createElement("div",null,i.map(function(t){return s["default"].createElement(v,{styleName:u.has(t.key)?"btn-active":"btn",key:t.key,onClick:e.handleSelect.bind(null,t)},""+t.name)}))))}}]),t}(f["default"]);S.defaultProps={multiple:!0,allowSelectAll:!0},t["default"]=(0,m["default"])(S,g["default"])},894:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function l(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){return{state:e.userProfile.properties.toJS()}}function s(e){return{actions:(0,h.bindActionCreators)(v,e),persistentActions:(0,h.bindActionCreators)(x,e)}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=l(f),d=n(16),h=n(7),y=n(5),b=l(y),m=n(1205),_=l(m),g=n(895),v=r(g),S=n(264),x=r(S),k=n(897),P=n(134),E=n(278),T=l(E),w=n(809),O=l(w),R=n(266),A=l(R),j=n(277),M=l(j),C=n(373),I=l(C),U=n(4),z=l(U),N=n(20),F=n(19),L=n(70),W=n(127),B=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.handleSubmit=n.handleSubmit.bind(n),n.handleSelectAll=n.handleSelectAll.bind(n),n}return i(t,e),u(t,[{key:"componentWillMount",value:function(){this.props.actions.fetchAllProperties(),this.props.actions.submitStatusChange(P.SUBMIT_STATUS.empty)}},{key:"componentWillReceiveProps",value:function(e){var t=e.state,n=t.submitStatus,r=t.id;n===P.SUBMIT_STATUS.done&&(this.props.actions.submitStatusChange(P.SUBMIT_STATUS.empty),this.props.persistentActions.persistentSet("compareSetId",T["default"].defaultToId),this.context.router.push({pathname:"/user-profile/report/normal",query:{id:r}}))}},{key:"handleSelectAll",value:function(e){e?this.props.actions.selectAll():this.props.actions.formClear()}},{key:"handleSubmit",value:function(){var e=(0,k.convertFormState)(this.props.state);console.log("id = "+this.props.state.id+"; tags = "+e),this.props.actions.submitAllProperties(this.props.state.id,e)}},{key:"render",value:function(){var e=this.props.params.propertyCategory,t=""+(+e+1),n=this.props,r=n.state,l=n.actions,a=r.config,o=r.form,i=r.id,c=r.submitStatus,s=(0,k.getMenuItems)(a,i),u=(0,k.getTagConfigFromState)(r,l),f=(0,k.isAllPropertiesSelected)(r),d=!0,h=!0,y=!1,b=void 0;try{for(var m,_=Object.keys(o)[Symbol.iterator]();!(h=(m=_.next()).done);h=!0){var g=m.value;o[g].length>0&&(d=!1)}}catch(v){y=!0,b=v}finally{try{!h&&_["return"]&&_["return"]()}finally{if(y)throw b}}return p["default"].createElement("div",{className:"full-height"},p["default"].createElement(N,{className:"full-height"},p["default"].createElement(F,{span:18,className:"full-height"},p["default"].createElement("div",{className:"fix-top-row-wrapper",style:{paddingTop:"120px"}},p["default"].createElement("div",{className:"fix-top-row",style:{height:"120px",paddingTop:"30px"}},p["default"].createElement("div",null,p["default"].createElement("p",{className:"fs14 fc-dark inline text-center",style:{width:"120px",marginBottom:"15px"}},"付费属性选择"),p["default"].createElement(I["default"],{onChange:this.handleSelectAll,checked:f},"全部选择")),p["default"].createElement("div",{style:{paddingLeft:"120px"}},p["default"].createElement(A["default"],{style:{height:"33px",lineHeight:"30px",overflow:"auto"},selectedMenu:e,menuItems:s}))),p["default"].createElement("div",{className:"full-height",style:{overflow:"auto",paddingLeft:"120px"}},e>=a.length?null:p["default"].createElement("section",{className:"border-style",style:{borderWidth:"1px",maxWidth:"800px",paddingTop:"15px",marginBottom:"15px"}},p["default"].createElement(O["default"],{label:a[e].name,icon:"tag",values:(a[e]||{}).valuePool||[],selectedValues:o[e]||[],onSelect:l.formSet.bind(null,e)})),t>=a.length?null:p["default"].createElement("section",{className:"border-style",style:{borderWidth:"1px",maxWidth:"800px",paddingTop:"15px"}},p["default"].createElement(O["default"],{label:a[t].name,icon:"tag",values:(a[t]||{}).valuePool||[],selectedValues:o[t]||[],onSelect:l.formSet.bind(null,t)}))))),p["default"].createElement(F,{span:6,className:"full-height"},p["default"].createElement(M["default"],{tagsConfigs:u,onClear:l.formClear,showCategory:!0},p["default"].createElement("div",null,p["default"].createElement("div",{className:(0,z["default"])({"not-allowed":d}),styleName:"submit-btn",style:d?{background:"#D4D4D4"}:{background:"#2FA4FF"},onClick:d?"":this.handleSubmit},"下一步　生成画像"))))),p["default"].createElement(L,{title:void 0,wrapClassName:"vertical-center-modal",visible:c===P.SUBMIT_STATUS.submit,onCancel:this.hideModel,maskClosable:!1,footer:void 0},p["default"].createElement("div",{style:{height:"200px",fontSize:"24px"}},p["default"].createElement("div",{className:"vertical-center text-center"},p["default"].createElement("span",{style:{marginRight:"20px"}},"正在提交, 请耐心等待"),p["default"].createElement(W,null)))))}}]),t}(f.Component);B.propTypes={params:p["default"].PropTypes.object,state:p["default"].PropTypes.object,actions:p["default"].PropTypes.object,persistentActions:p["default"].PropTypes.object},B.contextTypes={router:p["default"].PropTypes.object},t["default"]=(0,d.connect)(c,s)((0,b["default"])(B,_["default"]))},895:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){return{type:"USER_PROFILE@PROPERTIES@FORM_SET",formCategory:e,values:t}}function a(){return{type:"USER_PROFILE@PROPERTIES@FORM_SET_ALL"}}function o(e,t){return{type:"USER_PROFILE@PROPERTIES@FORM_DELETE",category:e,values:t}}function i(){return{type:"USER_PROFILE@PROPERTIES@FORM_RESET"}}function c(){return{type:"USER_PROFILE@PROPERTIES@FORM_CLEAR"}}function s(e){return{type:"USER_PROFILE@PROPERTIES@SUBMIT_STATUS_CHANGE",submitStatus:e}}function u(){return function(e){return(0,d["default"])((0,y["default"])("properties:getAllProperties")).then(function(e){return e.json()})["catch"](function(){return{status:"fail",result:[]}}).then(function(t){return e({type:"USER_PROFILE@PROPERTIES@PULL",data:t})})}}function f(e,t){var n=new FormData;return n.append("id",e),n.append("tags",t),n.append("user",(0,_["default"])().name),function(e){return e(s(b.SUBMIT_STATUS.submit)),(0,d["default"])((0,y["default"])("properties:submitAllProperties"),{method:"POST",body:n}).then(function(e){return e.json()})["catch"](function(){return{status:"fail",result:-1}}).then(function(t){return e({type:"USER_PROFILE@PROPERTIES@PUSH",data:t})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.formSet=l,t.selectAll=a,t.formDelete=o,t.formReset=i,t.formClear=c,t.submitStatusChange=s,t.fetchAllProperties=u,t.submitAllProperties=f;var p=n(49),d=r(p),h=n(39),y=r(h),b=n(134),m=n(34),_=r(m)},897:function(e,t){"use strict";function n(e,t){for(var n=[],r=0;r<e.length;r+=2)n.push({key:""+r,name:e[r+1]?e[r].name+" / "+e[r+1].name:e[r].name,link:{pathname:"/user-profile/properties/"+r,query:{id:t}}});return n}function r(e,t){var n=e.config,r=e.form,l={};return Object.keys(n).forEach(function(e){l[e]={name:n[e].name,tagsConfig:(r[e]||[]).map(function(n){return{label:n.name,onDelete:t.formDelete.bind(null,e,n.key)}})}}),l}function l(e){var t=e.form,n=e.config;if(Object.keys(t).length!==n.length)return!1;var r=!0;return n.forEach(function(e,n){e.valuePool.length!==t[n].length&&(r=!1)}),r}function a(e){var t=e.form,n=0;return Object.keys(t).forEach(function(e){n+=t[e].reduce(function(e,t){return e+t.price},0)}),n}function o(e){var t=e.form,n=[];return Object.keys(t).forEach(function(e){var r=!0,l=!1,a=void 0;try{for(var o,i=t[e][Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var c=o.value;n.push(c.id)}}catch(s){l=!0,a=s}finally{try{!r&&i["return"]&&i["return"]()}finally{if(l)throw a}}}),n.join(",")}Object.defineProperty(t,"__esModule",{value:!0}),t.getMenuItems=n,t.getTagConfigFromState=r,t.isAllPropertiesSelected=l,t.calTotalPrice=a,t.convertFormState=o},942:function(e,t,n){t=e.exports=n(13)(),t.push([e.id,".style__checkbox-inner___2yinf{position:relative;top:0;left:0;display:inline-block;vertical-align:middle;width:14px;height:14px;border-radius:3px;border:1px solid #d9d9d9;background-color:#fff;-webkit-transition:border-color .1s cubic-bezier(.71,-.46,.29,1.46),background-color .1s cubic-bezier(.71,-.46,.29,1.46);transition:border-color .1s cubic-bezier(.71,-.46,.29,1.46),background-color .1s cubic-bezier(.71,-.46,.29,1.46);margin-right:5px}.style__checkbox-outer-active___fvJK5 .style__checkbox-inner___2yinf{border-color:#2fa4ff;background-color:#2fa4ff}.style__checkbox-inner___2yinf:after,.style__checkbox-outer-active___fvJK5 .style__checkbox-inner___2yinf:after{-webkit-transform:rotate(45deg) scale(1);transform:rotate(45deg) scale(1);position:absolute;left:4px;top:1px;display:table;width:5px;height:8px;border:2px solid #fff;border-top:0;border-left:0;content:' ';-webkit-transition:all .2s cubic-bezier(.12,.4,.29,1.46) .1s;transition:all .2s cubic-bezier(.12,.4,.29,1.46) .1s}.style__checkbox-input___1dxfH{display:none;vertical-align:middle}.style__checkbox-label___1oQpX{display:inline-block;vertical-align:middle}",""]),t.locals={"checkbox-outer":"style__checkbox-outer___2kCwl","checkbox-outer-active":"style__checkbox-outer-active___fvJK5","checkbox-inner":"style__checkbox-inner___2yinf","checkbox-input":"style__checkbox-input___1dxfH","checkbox-label":"style__checkbox-label___1oQpX"}},957:function(e,t,n){t=e.exports=n(13)(),t.push([e.id,'.style__submit-btn___1ndu2{height:30px;line-height:30px;text-align:center;color:#fff;margin-bottom:10px;font-size:14px;border-radius:3px;cursor:pointer}.style__zigzag___3UAii{position:relative;height:45px;line-height:45px;padding-right:10px;background:#fcddc1;overflow:hidden;margin:0 auto 15px;width:200px;white-space:nowrap}.style__zigzag___3UAii:after{background:linear-gradient(45deg,transparent,transparent 10px,#f0f6fa 0,#f0f6fa 20px),linear-gradient(135deg,transparent,transparent 10px,#f0f6fa 0,#f0f6fa 20px);background-repeat:repeat-y;background-size:10px 10px;content:" ";display:block;position:absolute;top:-2.5px;right:0;width:10px;height:50px}.style__dollar___2Unur,.style__price___1xwTk{display:inline-block;height:100%;text-align:center}.style__dollar___2Unur{width:30px;margin-right:10px;background:#fcb06b;color:#fff;font-weight:900;font-size:16px}.style__price___1xwTk{width:140px}',""]),t.locals={"submit-btn":"style__submit-btn___1ndu2",zigzag:"style__zigzag___3UAii",dollar:"style__dollar___2Unur",price:"style__price___1xwTk"}},1194:function(e,t,n){var r=n(942);"string"==typeof r&&(r=[[e.id,r,""]]);n(14)(r,{});r.locals&&(e.exports=r.locals)},1205:function(e,t,n){var r=n(957);"string"==typeof r&&(r=[[e.id,r,""]]);n(14)(r,{});r.locals&&(e.exports=r.locals)}});
//# sourceMappingURL=6.ProfileProperties.chunk.222ea24c1970187182cc.js.map